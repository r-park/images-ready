/* imagesready v0.2.1 - 2015-07-01T21:35:44.385Z - https://github.com/r-park/images-ready */
!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.imagesReady=n()}(this,function(){"use strict";function e(e){_.length||(w(),E=!0),_[_.length]=e}function n(){for(;b<_.length;){var e=b;if(b+=1,_[e].call(),b>j){for(var n=0,t=_.length-b;t>n;n++)_[n]=_[n+b];_.length-=b,b=0}}_.length=0,b=0,E=!1}function t(e){var n=1,t=new I(e),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){n=-n,r.data=n}}function r(e){return function(){function n(){clearTimeout(t),clearInterval(r),e()}var t=setTimeout(n,0),r=setInterval(n,50)}}function o(){}function i(e){try{return e.then}catch(n){return A=n,q}}function u(e,n){try{return e(n)}catch(t){return A=t,q}}function f(e,n,t){try{e(n,t)}catch(r){return A=r,q}}function c(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._41=0,this._86=null,this._17=[],e!==o&&m(e,this)}function l(e,n,t){return new e.constructor(function(r,i){var u=new c(o);u.then(r,i),s(e,new v(n,t,u))})}function s(e,n){for(;3===e._41;)e=e._86;return 0===e._41?void e._17.push(n):void T(function(){var t=1===e._41?n.onFulfilled:n.onRejected;if(null===t)return void(1===e._41?a(n.promise,e._86):h(n.promise,e._86));var r=u(t,e._86);r===q?h(n.promise,A):a(n.promise,r)})}function a(e,n){if(n===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(n&&("object"==typeof n||"function"==typeof n)){var t=i(n);if(t===q)return h(e,A);if(t===e.then&&n instanceof c)return e._41=3,e._86=n,void d(e);if("function"==typeof t)return void m(t.bind(n),e)}e._41=1,e._86=n,d(e)}function h(e,n){e._41=2,e._86=n,d(e)}function d(e){for(var n=0;n<e._17.length;n++)s(e,e._17[n]);e._17=null}function v(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function m(e,n){var t=!1,r=f(e,function(e){t||(t=!0,a(n,e))},function(e){t||(t=!0,h(n,e))});t||r!==q||(t=!0,h(n,A))}function p(e,n){function t(){o===i&&n(o===r)}var r=0,o=e,i=0;return{failed:function(e){i+=e,t()},loaded:function(e){r+=e,i+=e,t()}}}function y(e,n){if("string"==typeof e&&(e=document.querySelectorAll(e),!e.length))throw new Error("selector `"+e+"` yielded 0 elements");var t=this.defer(n&&n.jquery),r=this.imageElements(this.validElements(this.toArray(e),y.VALID_NODE_TYPES)),o=r.length;o?this.verify(r,p(o,function(n){n?t.resolve(e):t.reject(e)})):t.resolve(e)}function g(e){var n=new y(e);return n.result}var w,_=[],E=!1,b=0,j=1024,I=window.MutationObserver||window.WebKitMutationObserver;w="function"==typeof I?t(n):r(n),e.requestFlush=w,e.makeRequestCallFromTimer=r;var T=e,A=null,q={};return c._1=o,c.prototype.then=function(e,n){if(this.constructor!==c)return l(this,e,n);var t=new c(o);return s(this,new v(e,n,t)),t},y.VALID_NODE_TYPES={1:!0,9:!0,11:!0},y.prototype={defer:function(e){var n;return e?(n=new $.Deferred,this.result=n.promise()):(n={},n.promise=new c(function(e,t){n.resolve=e,n.reject=t}),this.result=n.promise),n},imageElements:function(e){var n=[];return e.forEach(function(e){if("IMG"===e.nodeName)n.push(e);else for(var t=e.querySelectorAll("img"),r=0,o=t.length;o>r;++r)n.push(t[r])}),n},validElements:function(e,n){return e.filter(function(e){return n[e.nodeType]})},incompleteImages:function(e){return e.filter(function(e){return!(e.complete&&e.naturalWidth)})},proxyImage:function(e,n){return function(t){var r=new Image;return r.addEventListener("load",e),r.addEventListener("error",n),r.src=t.src,r}},verify:function(e,n){var t=this.incompleteImages(e);e.length>t.length&&n.loaded(e.length-t.length),t.length&&t.forEach(this.proxyImage(function(){n.loaded(1)},function(){n.failed(1)}))},toArray:function(e){return Array.isArray(e)?e:"number"==typeof e.length?[].slice.call(e):[e]}},window.jQuery&&($.fn.imagesReady=function(){var e=new y(this,{jquery:!0});return e.result}),g});
//# sourceMappingURL=imagesready.min.js.map