/* imagesready v0.1.10 - 2015-06-13T10:57:46.544Z - https://github.com/r-park/images-ready */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.imagesReady=t()}(this,function(){"use strict";function e(e){g.length||(w(),_=!0),g[g.length]=e}function t(){for(;b<g.length;){var e=b;if(b+=1,g[e].call(),b>j){for(var t=0,n=g.length-b;n>t;t++)g[t]=g[t+b];g.length-=b,b=0}}g.length=0,b=0,_=!1}function n(e){var t=1,n=new E(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function r(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}function i(){}function o(e){try{return e.then}catch(t){return q=t,I}}function u(e,t){try{return e(t)}catch(n){return q=n,I}}function s(e,t,n){try{e(t,n)}catch(r){return q=r,I}}function f(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._value=null,this._deferreds=[],e!==i&&m(e,this)}function a(e,t,n){return new e.constructor(function(r,o){var u=new f(i);u.then(r,o),l(e,new v(t,n,u))})}function l(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):void T(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?c(t.promise,e._value):d(t.promise,e._value));var r=u(n,e._value);r===I?d(t.promise,q):c(t.promise,r)})}function c(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=o(t);if(n===I)return d(e,q);if(n===e.then&&t instanceof f)return e._state=3,e._value=t,void h(e);if("function"==typeof n)return void m(n.bind(t),e)}e._state=1,e._value=t,h(e)}function d(e,t){e._state=2,e._value=t,h(e)}function h(e){for(var t=0;t<e._deferreds.length;t++)l(e,e._deferreds[t]);e._deferreds=null}function v(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=s(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,d(t,e))});n||r!==I||(n=!0,d(t,q))}function p(e,t){if(t=t||{},"string"==typeof e&&(e=document.querySelectorAll(e),!e.length))throw new Error("0 elements were found using selector `"+e+"`");var n=this.findImageElements(this.toList(e)),r=n.length;this.defer(t.jquery),n.length?(this.elements=e,this.images=n,this.total=r,this.loaded=0,this.verified=0,t.auto!==!1&&this.verify()):this.deferred.resolve(e)}function y(e){var t=new p(e);return t.result}var w,g=[],_=!1,b=0,j=1024,E=window.MutationObserver||window.WebKitMutationObserver;w="function"==typeof E?n(t):r(t),e.requestFlush=w,e.makeRequestCallFromTimer=r;var T=e,q=null,I={};f._noop=i,f.prototype.then=function(e,t){if(this.constructor!==f)return a(this,e,t);var n=new f(i);return l(this,new v(e,t,n)),n};var L={1:!0,9:!0,11:!0};return p.prototype={defer:function(e){var t,n;e?(t=new $.Deferred,n=t.promise()):(t={},t.promise=new f(function(e,n){t.resolve=e,t.reject=n}),n=t.promise),this.deferred=t,this.result=n},findImageElements:function(e){for(var t,n,r=[],i=e.length;i--;)if(t=e[i],"IMG"===t.nodeName)r.push(t);else if(L[t.nodeType]){n=t.querySelectorAll("img");for(var o=0,u=n.length;u>o;++o)r.push(n[o])}return r},update:function(){this.verified++,this.total===this.verified&&(this.total===this.loaded?this.deferred.resolve(this.elements):this.deferred.reject(this.elements),this.clean())},verify:function(){for(var e,t=this.images,n=t.length;n--;)e=t[n],e.complete&&e.naturalWidth?(this.loaded++,this.update()):this.verifyByProxy(e.src)},verifyByProxy:function(e){var t=new Image,n=this,r=function(){t.removeEventListener("load",onload),t.removeEventListener("error",onerror),t=null};t.addEventListener("load",function(){n.loaded++,n.update(),r()}),t.addEventListener("error",function(){n.update(),r()}),t.src=e},clean:function(){this.elements=null,this.images=null},toList:function(e){return"number"==typeof e.length?e:[e]}},window.jQuery&&($.fn.imagesReady=function(){var e=new p(this,{jquery:!0});return e.result}),y});
//# sourceMappingURL=imagesready.min.js.map