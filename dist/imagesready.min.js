/* imagesready v0.2.0 - 2015-07-01T07:12:43.929Z - https://github.com/r-park/images-ready */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.imagesReady=t()}(this,function(){"use strict";function e(e){_.length||(w(),E=!0),_[_.length]=e}function t(){for(;b<_.length;){var e=b;if(b+=1,_[e].call(),b>j){for(var t=0,n=_.length-b;n>t;t++)_[t]=_[t+b];_.length-=b,b=0}}_.length=0,b=0,E=!1}function n(e){var t=1,n=new I(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function r(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}function o(){}function i(e){try{return e.then}catch(t){return A=t,q}}function u(e,t){try{return e(t)}catch(n){return A=n,q}}function f(e,t,n){try{e(t,n)}catch(r){return A=r,q}}function c(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._41=0,this._86=null,this._17=[],e!==o&&p(e,this)}function l(e,t,n){return new e.constructor(function(r,i){var u=new c(o);u.then(r,i),a(e,new v(t,n,u))})}function a(e,t){for(;3===e._41;)e=e._86;return 0===e._41?void e._17.push(t):void T(function(){var n=1===e._41?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._41?s(t.promise,e._86):h(t.promise,e._86));var r=u(n,e._86);r===q?h(t.promise,A):s(t.promise,r)})}function s(e,t){if(t===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===q)return h(e,A);if(n===e.then&&t instanceof c)return e._41=3,e._86=t,void d(e);if("function"==typeof n)return void p(n.bind(t),e)}e._41=1,e._86=t,d(e)}function h(e,t){e._41=2,e._86=t,d(e)}function d(e){for(var t=0;t<e._17.length;t++)a(e,e._17[t]);e._17=null}function v(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function p(e,t){var n=!1,r=f(e,function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,h(t,e))});n||r!==q||(n=!0,h(t,A))}function m(e,t){var n={loaded:0,total:e,verified:0};return{update:function(e){e?(n.loaded+=e,n.verified+=e):n.verified++,n.total===n.verified&&t(n)}}}function y(e,t){if("string"==typeof e&&(e=document.querySelectorAll(e),!e.length))throw new Error("selector `"+e+"` yielded 0 elements");var n=this.defer(t&&t.jquery),r=this.imageElements(this.validElements(this.toArray(e),y.VALID_NODE_TYPES)),o=r.length;o?this.verify(r,m(o,function(t){t.total===t.loaded?n.resolve(e):n.reject(e)})):n.resolve(e)}function g(e){var t=new y(e);return t.result}var w,_=[],E=!1,b=0,j=1024,I=window.MutationObserver||window.WebKitMutationObserver;w="function"==typeof I?n(t):r(t),e.requestFlush=w,e.makeRequestCallFromTimer=r;var T=e,A=null,q={};return c._1=o,c.prototype.then=function(e,t){if(this.constructor!==c)return l(this,e,t);var n=new c(o);return a(this,new v(e,t,n)),n},y.VALID_NODE_TYPES={1:!0,9:!0,11:!0},y.prototype={defer:function(e){var t;return e?(t=new $.Deferred,this.result=t.promise()):(t={},t.promise=new c(function(e,n){t.resolve=e,t.reject=n}),this.result=t.promise),t},imageElements:function(e){var t=[];return e.forEach(function(e){if("IMG"===e.nodeName)t.push(e);else for(var n=e.querySelectorAll("img"),r=0,o=n.length;o>r;++r)t.push(n[r])}),t},validElements:function(e,t){return e.filter(function(e){return t[e.nodeType]})},incompleteImages:function(e){return e.filter(function(e){return!(e.complete&&e.naturalWidth)})},proxyImage:function(e,t){return function(n){var r=new Image;return r.addEventListener("load",e),r.addEventListener("error",t),r.src=n.src,r}},verify:function(e,t){var n=this.incompleteImages(e);e.length!==n.length&&t.update(e.length-n.length),n.length&&n.forEach(this.proxyImage(function(){t.update(1)},function(){t.update(0)}))},toArray:function(e){return Array.isArray(e)?e:"number"==typeof e.length?[].slice.call(e):[e]}},window.jQuery&&($.fn.imagesReady=function(){var e=new y(this,{jquery:!0});return e.result}),g});
//# sourceMappingURL=imagesready.min.js.map