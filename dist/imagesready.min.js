/* imagesready v0.2.2 - 2015-07-04T06:22:14.435Z - https://github.com/r-park/images-ready */
!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.imagesReady=n()}(this,function(){"use strict";function e(e){E.length||(_(),b=!0),E[E.length]=e}function n(){for(;I<E.length;){var e=I;if(I+=1,E[e].call(),I>T){for(var n=0,t=E.length-I;t>n;n++)E[n]=E[n+I];E.length-=I,I=0}}E.length=0,I=0,b=!1}function t(e){var n=1,t=new A(e),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){n=-n,r.data=n}}function r(e){return function(){function n(){clearTimeout(t),clearInterval(r),e()}var t=setTimeout(n,0),r=setInterval(n,50)}}function o(){}function i(e){try{return e.then}catch(n){return D=n,x}}function u(e,n){try{return e(n)}catch(t){return D=t,x}}function f(e,n,t){try{e(n,t)}catch(r){return D=r,x}}function c(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._41=0,this._86=null,this._17=[],e!==o&&p(e,this)}function l(e,n,t){return new e.constructor(function(r,i){var u=new c(o);u.then(r,i),a(e,new v(n,t,u))})}function a(e,n){for(;3===e._41;)e=e._86;return 0===e._41?void e._17.push(n):void j(function(){var t=1===e._41?n.onFulfilled:n.onRejected;if(null===t)return void(1===e._41?s(n.promise,e._86):h(n.promise,e._86));var r=u(t,e._86);r===x?h(n.promise,D):s(n.promise,r)})}function s(e,n){if(n===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(n&&("object"==typeof n||"function"==typeof n)){var t=i(n);if(t===x)return h(e,D);if(t===e.then&&n instanceof c)return e._41=3,e._86=n,void d(e);if("function"==typeof t)return void p(t.bind(n),e)}e._41=1,e._86=n,d(e)}function h(e,n){e._41=2,e._86=n,d(e)}function d(e){for(var n=0;n<e._17.length;n++)a(e,e._17[n]);e._17=null}function v(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function p(e,n){var t=!1,r=f(e,function(e){t||(t=!0,s(n,e))},function(e){t||(t=!0,h(n,e))});t||r!==x||(t=!0,h(n,D))}function m(e,n){if("string"==typeof e&&(e=document.querySelectorAll(e),!e.length))throw new Error("selector `"+e+"` yielded 0 elements");var t=y(n);this.result=t.promise;var r=this.imageElements(this.validElements(this.toArray(e),m.VALID_NODE_TYPES)),o=r.length;o?this.verify(r,g(o,function(n){n?t.resolve(e):t.reject(e)})):t.resolve(e)}function y(e){var n;return e?(n=new $.Deferred,n.promise=n.promise()):(n={},n.promise=new c(function(e,t){n.resolve=e,n.reject=t})),n}function g(e,n){function t(){o===i&&n(o===r)}var r=0,o=e,i=0;return{failed:function(e){i+=e,t()},loaded:function(e){r+=e,i+=e,t()}}}function w(e){var n=new m(e);return n.result}var _,E=[],b=!1,I=0,T=1024,A=window.MutationObserver||window.WebKitMutationObserver;_="function"==typeof A?t(n):r(n),e.requestFlush=_,e.makeRequestCallFromTimer=r;var j=e,D=null,x={};return c._1=o,c.prototype.then=function(e,n){if(this.constructor!==c)return l(this,e,n);var t=new c(o);return a(this,new v(e,n,t)),t},m.VALID_NODE_TYPES={1:!0,9:!0,11:!0},m.prototype={imageElements:function(e){var n=[];return e.forEach(function(e){if("IMG"===e.nodeName)n.push(e);else{var t=e.querySelectorAll("img");t.length&&n.push.apply(n,t)}}),n},validElements:function(e,n){return e.filter(function(e){return n[e.nodeType]})},incompleteImages:function(e){return e.filter(function(e){return!(e.complete&&e.naturalWidth)})},proxyImage:function(e,n){return function(t){var r=new Image;return r.addEventListener("load",e),r.addEventListener("error",n),r.src=t.src,r}},verify:function(e,n){var t=this.incompleteImages(e);e.length>t.length&&n.loaded(e.length-t.length),t.length&&t.forEach(this.proxyImage(function(){n.loaded(1)},function(){n.failed(1)}))},toArray:function(e){return Array.isArray(e)?e:"number"==typeof e.length?[].slice.call(e):[e]}},window.jQuery&&($.fn.imagesReady=function(){var e=new m(this,!0);return e.result}),w});
//# sourceMappingURL=imagesready.min.js.map